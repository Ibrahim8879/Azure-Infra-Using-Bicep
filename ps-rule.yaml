#
# PSRule configuration
#

# Please see the documentation for all configuration options:
# https://aka.ms/ps-rule/options
# https://aka.ms/ps-rule-azure/options

requires:
  PSRule.Rules.Azure: '>=1.34.0' # (1)

include:
  module:
    - PSRule.Rules.Azure

output:
  culture:
    - en-US

input:
  pathIgnore:
    - '**'                                # Ignore everything first
    - '!src/params/**/*.bicepparam'       # Then include only .bicepparam files under params
    - '!src/iac/**/*.bicep'               # And include .bicep files under iac/

configuration:
  AZURE_BICEP_FILE_EXPANSION: true
  AZURE_BICEP_PARAMS_FILE_EXPANSION: true
  AZURE_RESOURCE_GROUP:
    tags:
      env: test

#suppression:
#  Azure.KeyVault.Logs:
#    - kvtest001
#  Azure.Storage.BlobPublicAccess:
#    - sttest001